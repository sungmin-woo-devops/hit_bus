{% extends "base.html" %}

{% block title %}ë…¸ì„ ë³„ êµí†µëŸ‰ ë¶„ì„ - Team2{% endblock %}

{% block content %}
<!-- Chart.js CDN ì¶”ê°€ -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- ì‚¬ì´ë“œë°” -->
<div class="team2-sidebar">
  <h5>ë…¸ì„  ì„ íƒ</h5>
  {% for route in routes %}
    <a href="/team2?route={{ route }}" class="route-link {% if route == selected_route %}fw-bold{% endif %}">
      {{ route }}
    </a>
  {% endfor %}
</div>

<!-- ë©”ì¸ ì½˜í…ì¸  -->
<div class="team2-main">
  <h2>{{ selected_route }} ë…¸ì„  - ìƒìœ„ 20ê°œ ë°ì´í„°</h2>

  <!-- ğŸ“ˆ ê·¸ë˜í”„ ì˜ì—­ -->
  <div class="chart-container">
    <h5>ì‹œê°„ëŒ€ë³„ í‰ê·  ì´ìš©ê°ìˆ˜</h5>
    <canvas id="lineChart" height="100"></canvas>
  </div>

  <!-- í‘œ -->
  <div class="table-responsive">
    {{ table | safe }}
  </div>
</div>

<!-- Chart.js ìŠ¤í¬ë¦½íŠ¸ -->
<script>
  const ctx = document.getElementById('lineChart').getContext('2d');
  const lineChart = new Chart(ctx, {
      type: 'line',
      data: {
          labels: {{ chart_labels | safe }},
          datasets: [{
              label: 'í‰ê·  ì´ìš©ê°ìˆ˜',
              data: {{ chart_values | safe }},
              borderColor: 'rgba(75, 192, 192, 1)',
              backgroundColor: 'rgba(75, 192, 192, 0.2)',
              fill: true,
              tension: 0.3,
              pointRadius: 4
          }]
      },
      options: {
          responsive: true,
          scales: {
              x: {
                  title: {
                      display: true,
                      text: 'ì‹œì‘ ì‹œê° (ì‹œ)'
                  }
              },
              y: {
                  title: {
                      display: true,
                      text: 'í‰ê·  ì´ìš©ê°ìˆ˜'
                  },
                  beginAtZero: true
              }
          }
      }
  });
</script>
{% endblock %}
